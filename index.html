<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>L·ªãch Thi CTF - PurifyingBlade</title>
  <style>
    :root{
      --bg:#f4f7f9; --card:#fff; --text:#2c3e50; --muted:#556; --line:#e6e6e6;
      --grad1:#6a11cb; --grad2:#2575fc;
      --chip-up:#3498db; --chip-on:#2ecc71; --chip-done:#95a5a6; --chip-unk:#8e44ad;
      --chip-type:#ff8c00;
      --btn:#2575fc; --btn-text:#fff;
    }
    [data-theme="dark"]{
      --bg:#0f141b; --card:#121a22; --text:#e9eef6; --muted:#aab2bd; --line:#263241;
      --grad1:#3a0ca3; --grad2:#4361ee;
      --chip-up:#2980b9; --chip-on:#27ae60; --chip-done:#7f8c8d; --chip-unk:#9b59b6;
      --chip-type:#e67e22;
      --btn:#3b82f6; --btn-text:#fff;
    }

    *{box-sizing:border-box}
    body{
      margin:0; padding:24px; min-height:100vh;
      display:flex; justify-content:center; align-items:flex-start;
      background:var(--bg); color:var(--text); font-family:ui-sans-serif, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    .container{
      width:100%; max-width:1100px; background:var(--card);
      border-radius:16px; box-shadow:0 10px 30px rgba(0,0,0,.08); overflow:hidden;
      border:1px solid var(--line);
    }
    .hero{
      padding:28px 24px;
      background:linear-gradient(135deg, var(--grad1), var(--grad2));
      color:white; position:relative;
    }
    .hero h1{ margin:0 0 6px; font-size:28px; font-weight:800; letter-spacing:.3px }
    .hero p{ margin:0; opacity:.92 }
    .controls{
      display:flex; gap:12px; flex-wrap:wrap; margin-top:14px
    }
    .chip{
      display:inline-flex; align-items:center; gap:8px; padding:8px 12px;
      background:rgba(255,255,255,.15); border:1px solid rgba(255,255,255,.25);
      color:#fff; border-radius:999px; font-weight:600; font-size:13px; cursor:default;
      user-select:none; backdrop-filter: blur(4px);
    }
    .toolbar{
      display:flex; gap:12px; align-items:center; justify-content:space-between;
      padding:14px 18px; border-bottom:1px solid var(--line); background:linear-gradient(180deg, rgba(0,0,0,0.00), rgba(0,0,0,0.02));
      flex-wrap:wrap;
    }
    .left-tools, .right-tools{ display:flex; gap:10px; flex-wrap:wrap; align-items:center }
    .btn{
      appearance:none; border:none; border-radius:12px; padding:10px 14px;
      background:var(--btn); color:var(--btn-text); font-weight:700; cursor:pointer;
      transition:transform .05s ease, filter .15s ease;
    }
    .btn:active{ transform:translateY(1px) }
    .ghost{
      background:transparent; color:var(--text); border:1px solid var(--line)
    }
    .filter{
      padding:9px 12px; border-radius:10px; border:1px solid var(--line);
      background:transparent; color:var(--text)
    }
    .table-wrap{ overflow:auto; }
    table{ width:100%; border-collapse:collapse; }
    thead th{
      position:sticky; top:0; z-index:1;
      background:linear-gradient(0deg, rgba(0,0,0,0.00), rgba(0,0,0,0.03));
      backdrop-filter: blur(3px);
      text-align:left; padding:14px 16px; font-weight:700; color:var(--muted); border-bottom:1px solid var(--line);
    }
    tbody td{
      padding:14px 16px; border-bottom:1px solid var(--line); vertical-align:middle;
    }
    tbody tr:hover{ background:rgba(0,0,0,.03) }
    .status{
      display:inline-block; padding:6px 12px; border-radius:999px; font-weight:800; font-size:12px; color:#fff; letter-spacing:.2px
    }
    .status.upcoming{ background:var(--chip-up) }
    .status.ongoing{ background:var(--chip-on) }
    .status.finished{ background:var(--chip-done) }
    .status.unknown{ background:var(--chip-unk) }
    .type{
      display:inline-block; padding:6px 10px; border-radius:999px; font-weight:800; font-size:12px; color:#fff; background:var(--chip-type)
    }
    .title{
      font-weight:800; font-size:15px; line-height:1.2;
    }
    .subtle{ color:var(--muted); font-size:12px }
    .link-btn{
      display:inline-flex; align-items:center; gap:8px; text-decoration:none;
      background:transparent; border:1px solid var(--line); padding:8px 12px; border-radius:10px; font-weight:700; color:var(--text)
    }
    .pill{
      display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px; border:1px solid var(--line); font-size:12px; color:var(--muted);
    }
    @media (max-width: 760px){
      .toolbar{ padding:12px }
      thead{ display:none }
      table, tbody, tr, td{ display:block; width:100% }
      tbody tr{ border-bottom:1px solid var(--line) }
      tbody td{ border:none; padding:10px 16px }
      tbody td::before{
        content:attr(data-label); display:block; font-weight:700; color:var(--muted); margin-bottom:6px
      }
    }
  </style>
</head>
<body data-theme="light">
  <div class="container">
    <div class="hero">
      <h1>üóìÔ∏è L·ªãch Thi CTF ‚Ä¢ PurifyingBlade</h1>
      <p>Danh s√°ch s·ª± ki·ªán CTF s·∫Øp t·ªõi (ICT, Asia/Ho_Chi_Minh). S·ª± ki·ªán thi·∫øu ng√†y s·∫Ω hi·ªÉn th·ªã l√† <b>‚ÄúCh∆∞a c√¥ng b·ªë‚Äù</b>.</p>
      <div class="controls">
        <span class="chip">‚è±Ô∏è ICT (UTC+7)</span>
        <span class="chip">‚öîÔ∏è A/D &amp; Jeopardy</span>
        <span class="chip">‚ú® T·ª± ƒë·ªông ph√¢n lo·∫°i tr·∫°ng th√°i</span>
      </div>
    </div>

    <div class="toolbar">
      <div class="left-tools">
        <select id="typeFilter" class="filter" title="L·ªçc theo th·ªÉ lo·∫°i">
          <option value="all">T·∫•t c·∫£ th·ªÉ lo·∫°i</option>
          <option value="Jeopardy">Jeopardy</option>
          <option value="Attack/Defense">Attack/Defense</option>
          <option value="unknown">Ch∆∞a r√µ</option>
        </select>
        <button id="sortBtn" class="btn ghost">S·∫Øp x·∫øp theo th·ªùi gian</button>
      </div>
      <div class="right-tools">
        <button id="themeBtn" class="btn">Dark / Light</button>
      </div>
    </div>

    <div class="table-wrap" id="schedule-container"></div>
  </div>

  <script>
  // ======== D·ªÆ LI·ªÜU (gi·ªØ format nh∆∞ b·∫°n ƒëang d√πng) ========
  const lichThi = [
    {
      ten: "SekaiCTF 2025",
      batDau: "2025-08-16T08:00:00",
      ketThuc: "2025-08-18T08:00:00",
      loai: "Jeopardy",
      link: "https://ctf.sekai.team/"
    },
    {
      ten: "DDCCTF 2025",
      batDau: "",
      ketThuc: "",
      loai: "Jeopardy",
      link: ""
    },
    {
      ten: "Full Weak Engineer CTF 2025",
      batDau: "2025-08-29T17:00:00",
      ketThuc: "2025-08-31T17:00:00",
      loai: "Jeopardy",
      link: "https://ctf.fwectf.com/"
    },
    {
      ten: "HOLACTF 2025",
      batDau: "2025-08-30T00:00:00",
      ketThuc: "2025-08-31T23:59:59",
      loai: "Jeopardy",
      link: ""
    },
    {
      ten: "FHacker CTF 2025 - Thi th·ª≠",
      batDau: "2025-08-25T00:00:00",
      ketThuc: "2025-08-25T23:59:59",
      loai: "Attack/Defense",
      link: ""
    },
    {
      ten: "FHacker CTF 2025 - Thi ch√≠nh th·ª©c",
      batDau: "2025-09-06T00:00:00",
      ketThuc: "2025-09-06T23:59:59",
      loai: "Attack/Defense",
      link: ""
    }
  ];

  // ======== H·ªñ TR·ª¢ TH·ªúI GIAN / TR·∫†NG TH√ÅI ========
  const tzOpts = {year:'numeric', month:'2-digit', day:'2-digit', hour:'2-digit', minute:'2-digit', hour12:false, timeZone:'Asia/Ho_Chi_Minh'};
  const fmt = new Intl.DateTimeFormat('vi-VN', tzOpts);
  const now = new Date();

  function parseDateSafe(s){
    if(!s || typeof s !== 'string' || !s.trim()) return null;
    const d = new Date(s);
    return isNaN(d.getTime()) ? null : d;
  }
  function getStatus(start, end){
    if(!start || !end) return {label:'Kh√¥ng r√µ', cls:'unknown'};
    if(now < start) return {label:'S·∫Øp di·ªÖn ra', cls:'upcoming'};
    if(now >= start && now <= end) return {label:'ƒêang di·ªÖn ra', cls:'ongoing'};
    return {label:'ƒê√£ k·∫øt th√∫c', cls:'finished'};
  }
  function sortByTime(a, b){
    const sa = parseDateSafe(a.batDau), sb = parseDateSafe(b.batDau);
    if(!sa && !sb) return 0;
    if(!sa) return 1;      // ƒë·∫©y s·ª± ki·ªán ch∆∞a r√µ ng√†y xu·ªëng cu·ªëi
    if(!sb) return -1;
    return sa - sb;
  }

  // ======== RENDER ========
  let sortedAsc = true;

  function render(){
    const typeFilter = document.getElementById('typeFilter').value;
    const container = document.getElementById('schedule-container');

    // s·∫Øp x·∫øp
    const data = [...lichThi].sort(sortByTime);
    if(!sortedAsc) data.reverse();

    // l·ªçc
    const filtered = data.filter(e=>{
      const t = (e.loai || '').trim() || 'unknown';
      return typeFilter === 'all' ? true : t === typeFilter;
    });

    // build table
    let html = `
      <table>
        <thead>
          <tr>
            <th>T√™n Gi·∫£i</th>
            <th>Th·ªùi Gian</th>
            <th>Th·ªÉ Lo·∫°i</th>
            <th>Tr·∫°ng Th√°i</th>
            <th>Link</th>
          </tr>
        </thead>
        <tbody>
    `;

    filtered.forEach(ctf=>{
      const s = parseDateSafe(ctf.batDau);
      const e = parseDateSafe(ctf.ketThuc);
      const status = getStatus(s, e);
      const timeText = (s && e) ? `${fmt.format(s)} ‚Üí ${fmt.format(e)}`
                                : `<span class="subtle">Ch∆∞a c√¥ng b·ªë</span>`;
      const typeText = (ctf.loai && ctf.loai.trim()) ? ctf.loai : 'unknown';
      const link = (ctf.link && ctf.link.trim()) ? ctf.link : '#';

      html += `
        <tr>
          <td data-label="T√™n Gi·∫£i">
            <div class="title">${ctf.ten}</div>
          </td>
          <td data-label="Th·ªùi Gian">
            ${timeText}
          </td>
          <td data-label="Th·ªÉ Lo·∫°i">
            <span class="type">${typeText}</span>
          </td>
          <td data-label="Tr·∫°ng Th√°i">
            <span class="status ${status.cls}">${status.label}</span>
          </td>
          <td data-label="Link">
            <a class="link-btn" href="${link}" target="_blank" rel="noopener noreferrer">
              üîó Chi ti·∫øt
            </a>
          </td>
        </tr>
      `;
    });

    html += `</tbody></table>`;
    container.innerHTML = html;
  }

  // ======== INTERACTIONS ========
  document.getElementById('typeFilter').addEventListener('change', render);
  document.getElementById('sortBtn').addEventListener('click', ()=>{
    sortedAsc = !sortedAsc;
    render();
  });

  // theme toggle
  const themeBtn = document.getElementById('themeBtn');
  themeBtn.addEventListener('click', ()=>{
    const root = document.body;
    const cur = root.getAttribute('data-theme') || 'light';
    root.setAttribute('data-theme', cur === 'light' ? 'dark' : 'light');
  });

  // first paint
  render();
  </script>
</body>
</html>

